<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>City System - iCrowds Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "City System";
        var mkdocs_page_input_path = "dynamic\\city.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> iCrowds Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Static</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../static/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../static/stadium/">Stadium</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Scatter</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../static/scatter/ground/">Scatter on Ground</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../static/scatter/curve/">Scatter on Curve</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../static/scatter/vertex/">Scatter on Vertex</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Dynamic</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../fluid/">Fluid System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../walkers/">Walkers System</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">City System</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#distribution">Distribution</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#input-configuration">Input Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#distribution-settings">Distribution Settings</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#object-configuration">Object Configuration</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#agent-scattering">Agent Scattering</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#weight-painting">Weight Painting</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#settings">Settings</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#speed-configuration">Speed Configuration</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#activities-system">Activities System</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#activity-types">Activity Types</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#activity-input">Activity Input</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#needs-based-behavior">Needs-Based Behavior</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#debug-features">Debug Features</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#movement-debugging">Movement Debugging</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#activity-debugging">Activity Debugging</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#performance-optimization">Performance Optimization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#path-finding">Path Finding</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#time-management">Time Management</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#agents">Agents</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#agent-collections">Agent Collections</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#density-management">Density Management</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#agent-customization">Agent Customization</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#individual-agent-editing">Individual Agent Editing</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#custom-agent-creation">Custom Agent Creation</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#collection-management">Collection Management</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#workflow">Workflow</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Agents</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../extra/agents/">Customize</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Q&A</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../extra/faq/">FAQ</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../extra/tutorials/">Tutorials</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">iCrowds Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Dynamic</li>
      <li class="breadcrumb-item active">City System</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="city-icrowd-system-user-documentation">City iCrowd System - User Documentation</h1>
<h2 id="overview">Overview</h2>
<p>The Dynamic Behaviour System is a comprehensive simulation system that controls agent behaviors, movement, and interactions within urban environments. The system consists of three main components: Distribution, Settings, and Agents.</p>
<h2 id="distribution">Distribution</h2>
<h3 id="input-configuration">Input Configuration</h3>
<p>The system supports two types of urban environment inputs:</p>
<ul>
<li><strong>iCity</strong>: Pre-built city environment</li>
<li><strong>Custom City</strong>: User-defined city configuration consisting of:</li>
<li><strong>City Ground</strong>: Base terrain and infrastructure</li>
<li><strong>Colliders</strong>: Obstacles and navigation boundaries</li>
</ul>
<h3 id="distribution-settings">Distribution Settings</h3>
<h4 id="object-configuration">Object Configuration</h4>
<ul>
<li><strong>Custom City Ground</strong>: Enable/disable custom ground objects</li>
<li><strong>Colliders</strong>: Toggle collision detection objects</li>
<li><strong>Custom City Colliders Collection</strong>: Organize collision objects in dedicated collections</li>
</ul>
<h4 id="agent-scattering">Agent Scattering</h4>
<ul>
<li><strong>Viewer</strong>: Render visualization mode</li>
<li><strong>Density Controls</strong>:</li>
<li><strong>Density</strong>: 1 meter spacing between agents</li>
<li><strong>Max</strong>: Maximum of 2,000 agents</li>
<li><strong>Factor</strong>: Distribution factor (default: 0.407)</li>
<li><strong>Seed</strong>: Randomization seed for agent placement</li>
</ul>
<h4 id="weight-painting">Weight Painting</h4>
<ul>
<li><strong>Vertex Group Mask</strong>: Use vertex groups to control agent distribution density</li>
</ul>
<h2 id="settings">Settings</h2>
<h3 id="speed-configuration">Speed Configuration</h3>
<ul>
<li><strong>Speed Scalar</strong>: Global multiplier for all agent speeds (default: 1.000)</li>
<li><strong>Walking Speed</strong>: Threshold speed for walking animation (0.010)</li>
<li><strong>Run Speed</strong>: Threshold speed for running animation (1.200)</li>
<li><strong>Max Speed</strong>: Maximum possible speed in the system (10.000)</li>
</ul>
<h3 id="activities-system">Activities System</h3>
<h4 id="activity-types">Activity Types</h4>
<p>The system supports multiple activity types:
- <strong>Fun</strong> - Entertainment and leisure activities
- <strong>Sleep</strong> - Resting and sleeping locations
- <strong>Hunger</strong> - Food and dining locations
- <strong>Bladder</strong> - Restroom facilities</p>
<h4 id="activity-input">Activity Input</h4>
<p>Users can input either:
- <strong>Single Object</strong>: Individual activity location
- <strong>Collection</strong>: Group of related activities (e.g., collection of fun locations)</p>
<h4 id="needs-based-behavior">Needs-Based Behavior</h4>
<p>Each agent maintains dynamic needs sliders for:
- Fun
- Sleep
- Hunger
- Bladder</p>
<p><strong>Behavior Flow</strong>:
1. When a need decreases below threshold, agent pathfinds to nearest relevant activity
2. Upon reaching activity location, the corresponding need parameter is filled
3. Agent then seeks to fulfill other deficient needs
4. Continuous cycle of need fulfillment creates emergent behavior patterns</p>
<h3 id="debug-features">Debug Features</h3>
<h4 id="movement-debugging">Movement Debugging</h4>
<ul>
<li><strong>Debug Movement</strong>: Visualizes agent movement directions</li>
<li><strong>Path Finding Grid</strong>: Displays navigation mesh used for pathfinding</li>
</ul>
<h4 id="activity-debugging">Activity Debugging</h4>
<ul>
<li><strong>Debug Activity</strong>: Shows real-time needs sliders above each agent</li>
<li><strong>Activity Indicator</strong>: Circular icon above slider indicates current active action</li>
</ul>
<h3 id="performance-optimization">Performance Optimization</h3>
<h4 id="path-finding">Path Finding</h4>
<ul>
<li><strong>Path Finding Details</strong>: Controls grid resolution (default: 1.000)</li>
<li>Lower values increase performance for large-scale simulations</li>
<li>Higher values provide more precise navigation</li>
</ul>
<h4 id="time-management">Time Management</h4>
<ul>
<li><strong>Time Scale</strong>: Controls need depletion rate (default: 0.008)</li>
<li>Higher values make needs deplete faster</li>
<li>Affects simulation pacing (e.g., agents feel sleepy more quickly)</li>
</ul>
<h2 id="agents">Agents</h2>
<h3 id="agent-collections">Agent Collections</h3>
<p>Pre-configured agent animation states:
- <strong>Male Agents</strong>: 
  - men Idle
  - men Walk<br />
  - men Run
- <strong>Female Agents</strong>:
  - women Idle
  - women Walk
  - women Run</p>
<h3 id="density-management">Density Management</h3>
<ul>
<li><strong>Probability</strong>: Controls spawn likelihood of agent collections (default: 0.500)</li>
<li><strong>Agent Settings</strong>: Separate configuration for Male and Female agents</li>
</ul>
<h3 id="agent-customization">Agent Customization</h3>
<h4 id="individual-agent-editing">Individual Agent Editing</h4>
<ul>
<li><strong>Customize Agent</strong>: Modify specific agent instances</li>
<li><strong>Change Clothes</strong>: Swap agent clothing and appearance</li>
<li><strong>Change Action</strong>: Modify animation behaviors</li>
<li><strong>Include All</strong>: Apply changes to entire agent group</li>
</ul>
<h4 id="custom-agent-creation">Custom Agent Creation</h4>
<p>Users can add custom agents or collections with:
- <strong>Object</strong>: Agent mesh object
- <strong>Collection</strong>: Agent group collection
- <strong>Agent Mesh</strong>: 3D model reference
- <strong>Agent Armature</strong>: Animation skeleton
- <strong>Gender</strong>: Male/Female classification</p>
<h3 id="collection-management">Collection Management</h3>
<ul>
<li><strong>Include</strong>: Add agents to active simulation</li>
<li><strong>Discard</strong>: Remove agents from consideration</li>
</ul>
<h2 id="workflow">Workflow</h2>
<ol>
<li><strong>Setup</strong>: Configure city environment (iCity or Custom)</li>
<li><strong>Distribution</strong>: Scatter agents with density controls</li>
<li><strong>Activities</strong>: Place activity objects or collections</li>
<li><strong>Agents</strong>: Configure agent types, probabilities, and behaviors</li>
<li><strong>Simulation</strong>: Run with debug tools for monitoring</li>
<li><strong>Optimization</strong>: Adjust pathfinding and time scale as needed</li>
</ol>
<p>This system creates dynamic, emergent behaviors where agents autonomously navigate urban environments to fulfill their needs, creating realistic crowd simulation and urban activity patterns.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../walkers/" class="btn btn-neutral float-left" title="Walkers System"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../extra/agents/" class="btn btn-neutral float-right" title="Customize">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../walkers/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../extra/agents/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
